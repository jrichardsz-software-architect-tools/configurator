<!DOCTYPE html>
<html lang="en">

{{> head}}

<body>

	<div id="wrapper">

		{{> navbar}}

		{{> sidenav}}

		<div id="page-wrapper">
			<div class="row">
				<div class="col-lg-12">
					<h1 class="page-header">Applications</h1>
				</div>
			</div>
			<div class="row" style="word-wrap:break-word" >
				<div class="col-lg-12">
					{{#if success_message}}
						<div class="alert alert-success">
							{{success_message}}
						</div>
					{{/if}}
					{{#if warning_message}}
						<div class="alert alert-warning">
							{{warning_message}}
						</div>
					{{/if}}
					{{#if error_message}}
						<div class="alert alert-danger">
							{{error_message}}
						</div>
					{{/if}}
					{{#if error_security_message}}
						<div class="alert alert-danger">
							{{error_security_message}}
						</div>
					{{/if}}

					<div style="display: flex;">
						<div>
							{{#stringEquals userRole 'admin'}}
									<a href="/application/view/new" type="button" class="btn btn-outline btn-primary">New application</a>
									<br><br>
							{{/stringEquals}}
						</div>
						<div style="margin-left: 1rem;">
							<form method="get" action="/search" class="form-group">
								<div class="input-group">
									<input type="text" name="application" class="form-control" placeholder="Enter name of application" minlength="3" required>
									<span class="input-group-btn">
										<button type="submit" class="btn btn-outline btn-primary">Search</button>
									</span>
								</div>
							</form>
						</div>
					</div>

					<div class="panel panel-default">
						<div class="panel-body">
							<div class="table-responsive">
								<table class="table table-bordered table-hover table-striped">
									<thead>
										<tr>
											<th>#</th>
											<th>Name</th>
											<th>Type</th>
											<th>Description</th>
											<th style="text-align: center;">Manage</th>
										</tr>
									</thead>
									<tbody>

										{{#each applications}}
											<tr class="table-row">
												<td>{{incremented @index}}</td>
												<td>{{this.name}}</td>
												<td>{{this.type}}</td>
												<td>{{this.description}}</td>
												<td style="text-align: center;">
													<a href="/application-variable?application_id={{this.id}}" type="button" class="btn btn-outline btn-primary fa fa-list"
													data-toggle="tooltip" data-placement="top" title="Variables"></a>
                          {{#stringEquals  @root.userRole 'admin'}}
                              <a href="/application/view/edit/{{this.id}}" type="button" class="btn btn-outline btn-primary fa fa-pencil-square-o"
                              data-toggle="tooltip" data-placement="top" title="Edit"></a>
                              <a href="/application/view/delete/{{this.id}}" type="button" class="btn btn-outline btn-primary fa fa-times"
                              data-toggle="tooltip" data-placement="top" title="Delete"></a>
                					{{/stringEquals}}
													</a>
												</td>
											</tr>
										{{/each}}
									</tbody>
								</table>
							</div>
						</div>
					</div>
					<br>
					<br>
				</div>
			</div>
		</div>

		<!-- /#page-wrapper -->

	</div>
	<!-- /#wrapper -->

	{{> scripts}}

</body>

</html>
